{"version":3,"sources":["picker/arrow/Arrow.tsx","picker/note/Note.tsx","picker/Picker.tsx","App.tsx","usePlayer.tsx","transform.ts","reportWebVitals.ts","index.tsx"],"names":["Arrow","direction","onClick","className","clsx","src","alt","CLASSMAP","x","G3","A3","B3","C4","D4","E4","F4","G4","A4","B4","C5","D5","E5","Note","onUp","onDown","value","noteClassName","data-name","newValue","Tone","transpose","toNote","indexOf","Picker","melody","onChange","pickersCells","map","idx","order","App","useState","pick","setpick","player","synth","setSynth","useEffect","bpm","isPlaying","play","_synth","envelope","attack","decay","release","releaseCurve","toDestination","onsilence","i","disconnect","dispose","cancel","stop","undefined","values","result","currentTime","length","push","pitch","start","transform","forEach","note","triggerAttackRelease","usePlayer","slice","disabled","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f3da09c9.chunk.js","sourcesContent":["import clsx from \"clsx\";\nimport React from \"react\";\nimport \"./arrow.css\";\n\ntype ArrowProps = {\n  direction: \"up\" | \"down\";\n  onClick: () => void;\n};\nexport default function Arrow({ direction, onClick }: ArrowProps) {\n  return (\n    <button className={clsx(\"Arrow\", direction)} onClick={onClick}>\n      <img src=\"/arrow.svg\" alt=\"arrow\" />\n    </button>\n  );\n}\n","import clsx from \"clsx\";\nimport React from \"react\";\nimport * as Tone from \"tone\";\nimport Arrow from \"../arrow/Arrow\";\nimport \"./note.scss\";\n\nconst CLASSMAP: { [name: string]: string } = {\n  \"-\": \"repeat\",\n  x: \"rest\",\n  G3: \"low-g\",\n  A3: \"low-a\",\n  B3: \"low-b\",\n  C4: \"low-c\",\n  D4: \"low-d\",\n  E4: \"low-e\",\n  F4: \"low-f\",\n  G4: \"hi-g\",\n  A4: \"hi-a\",\n  B4: \"hi-b\",\n  C5: \"hi-c\",\n  D5: \"hi-d\",\n  E5: \"hi-e\",\n};\n\ntype NoteProps = {\n  onUp: (newValue: string) => void;\n  onDown: (newValue: string) => void;\n  value: string;\n  order: number;\n};\n\nconst Note = ({ onUp, onDown, value }: NoteProps) => {\n  const goUp = () => {\n    if (value === \"x\") {\n      onUp(\"-\");\n    } else if (value === \"-\") {\n      onUp(\"G3\");\n    } else if (value === \"E5\") {\n    } else {\n      let newValue = Tone.Frequency(value);\n      do {\n        newValue = newValue.transpose(1);\n      } while (newValue.toNote().indexOf(\"#\") !== -1);\n      onUp(newValue.toNote());\n    }\n  };\n\n  const goDown = () => {\n    if (value === \"G3\") {\n      onDown(\"-\");\n    } else if (value === \"-\") {\n      onDown(\"x\");\n    } else if (value === \"x\") {\n    } else {\n      let newValue = Tone.Frequency(value);\n      do {\n        newValue = newValue.transpose(-1);\n      } while (newValue.toNote().indexOf(\"#\") !== -1);\n      onUp(newValue.toNote());\n    }\n  };\n\n  const noteClassName: string = CLASSMAP[value];\n  return (\n    <div className={clsx(\"Note\", noteClassName)} data-name={value}>\n      <Arrow onClick={goUp} direction={\"up\"} />\n      <Arrow onClick={goDown} direction={\"down\"} />\n    </div>\n  );\n};\n\nexport default Note;\n","import React from \"react\";\nimport { Melody } from \"../transform\";\nimport Note from \"./note/Note\";\n\nimport \"./picker.css\";\nimport \"./picker.mobile.css\";\n\ntype PickerProps = {\n  melody: Melody;\n  onChange: (idx: number, newValue: string) => void;\n};\n\nexport default function Picker({ melody, onChange }: PickerProps) {\n  const pickersCells = melody.map((value, idx) => (\n    <Note\n      onDown={(newValue: string) => onChange(idx, newValue)}\n      onUp={(newValue: string) => onChange(idx, newValue)}\n      value={value}\n      key={idx}\n      order={idx}\n    />\n  ));\n\n  return (\n    <div className=\"Picker\">\n      <div className=\"Picker-inner\">{pickersCells}</div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Melody } from \"./transform\";\nimport Picker from \"./picker/Picker\";\n\nimport \"minireset.css/minireset.sass\";\nimport \"./App.css\";\nimport usePlayer from \"./usePlayer\";\n\nfunction App() {\n  // const init = Array(16).fill(\"E4\");\n\n  // ALL\n  const init: Melody = [\n    \"E5\",\n    \"E5\",\n    \"D5\",\n    \"C5\",\n    \"B4\",\n    \"A4\",\n    \"G4\",\n    \"F4\",\n    \"E4\",\n    \"D4\",\n    \"C4\",\n    \"B3\",\n    \"A3\",\n    \"G3\",\n    \"-\",\n    \"x\",\n  ];\n\n  // const init = [\n  //   \"-\",\n  //   \"x\",\n  //   \"G3\",\n  //   \"A3\",\n  //   \"B3\",\n  //   \"C4\",\n  //   \"D4\",\n  //   \"E4\",\n  //   \"-\",\n  //   \"x\",\n  //   \"G3\",\n  //   \"A3\",\n  //   \"B3\",\n  //   \"C4\",\n  //   \"D4\",\n  //   \"E4\",\n  // ];\n  const [pick, setpick] = useState<Melody>(init);\n\n  const update = (idx: number, newValue: string) => {\n    setpick([\n      ...pick.slice(0, idx),\n      newValue,\n      ...pick.slice(idx + 1),\n    ] as Melody);\n  };\n\n  const player = usePlayer();\n\n  return (\n    <div className=\"App\">\n      <h1>Animal Crossing Tunes Studio</h1>\n      <section className=\"picker\">\n        <Picker onChange={update} melody={pick} />\n      </section>\n      <div>\n        <button onClick={() => player.play(pick)} disabled={player.isPlaying()}>\n          play\n        </button>\n        <button onClick={() => player.stop()} disabled={!player.isPlaying()}>\n          stop\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import { useEffect, useState } from \"react\";\nimport * as Tone from \"tone\";\nimport { Melody, transform } from \"./transform\";\n\ninterface Player {\n  isPlaying(): boolean;\n  play(melody: Melody): void;\n  stop(): void;\n}\n\nexport default function usePlayer(): Player {\n  const [synth, setSynth] = useState<Tone.AMSynth>();\n\n  useEffect(() => {\n    Tone.Transport.bpm.value = 100;\n  }, []);\n\n  return {\n    isPlaying: () => {\n      return !(synth == null);\n    },\n    play: (melody: Melody) => {\n      const _synth = new Tone.AMSynth({\n        envelope: {\n          attack: 0.09,\n          decay: 0.0795,\n          release: 0.2,\n          releaseCurve: \"step\",\n        },\n      }).toDestination();\n\n      _synth.onsilence = (i) => {\n        i.disconnect();\n        i.dispose();\n        Tone.Transport.cancel();\n        Tone.Transport.stop();\n        setSynth(undefined);\n      };\n\n      const durationMultiplier = 0.8;\n      transform(melody).forEach((note) => {\n        _synth.triggerAttackRelease(\n          note.pitch,\n          `0:0:${note.value * durationMultiplier}`,\n          `+0:0:${note.start}`\n        );\n      });\n\n      setSynth(_synth);\n    },\n    stop: () => {\n      synth!.disconnect();\n      synth!.dispose();\n\n      Tone.Transport.cancel();\n      Tone.Transport.stop();\n      setSynth(undefined);\n    },\n  };\n}\n","export type Sound = {\n  pitch: string;\n  start: number; // in 16ths\n  value: number; // in 16ths\n};\n\nexport type Note =\n  | \"E5\"\n  | \"E5\"\n  | \"D5\"\n  | \"C5\"\n  | \"B4\"\n  | \"A4\"\n  | \"G4\"\n  | \"F4\"\n  | \"E4\"\n  | \"D4\"\n  | \"C4\"\n  | \"B3\"\n  | \"A3\"\n  | \"G3\"\n  | \"-\"\n  | \"x\";\n\nexport type Melody = [\n  Note,\n  Note,\n  Note,\n  Note,\n  Note,\n  Note,\n  Note,\n  Note,\n  Note,\n  Note,\n  Note,\n  Note,\n  Note,\n  Note,\n  Note,\n  Note\n]; // 16 notes\n\nexport function transform(values: Melody): Sound[] {\n  let result: Sound[] = [];\n\n  let currentTime = 0; // sixteenths\n\n  for (let i = 0; i < values.length; i++) {\n    if (values[i] === \"x\") {\n      currentTime += 2;\n    } else if (values[i] === \"-\") {\n      result[result.length - 1].value += 2;\n      currentTime += 2;\n    } else {\n      result.push({\n        pitch: values[i],\n        start: currentTime,\n        value: 2,\n      });\n      currentTime += 2;\n    }\n  }\n  return result;\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}